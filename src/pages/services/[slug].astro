---
import ServiceLayout from '../../layouts/ServiceLayout.astro';
import HeroPage from '../../components/sections/HeroPage.astro';
import RelatedServices from '../../components/sections/RelatedServices.astro';
import CTABanner from '../../components/sections/CTABanner.astro';
import Card from '../../components/ui/Card.astro';
import Button from '../../components/ui/Button.astro';
import { services, type Service } from '../../data/services';

export function getStaticPaths() {
  return services.map((service) => ({
    params: { slug: service.slug },
    props: { service },
  }));
}

interface Props {
  service: Service;
}

const { service } = Astro.props;

// SEO-optimized title and description with location
const seoTitle = `${service.title} Luxembourg - Service Professionnel`;
const seoDescription = `${service.title} au Luxembourg par IINNOVALUX. ${service.description} Devis gratuit, intervention rapide. +352 621 479 364`;
const seoKeywords = `${service.title.toLowerCase()} Luxembourg, ${service.slug.replace(/-/g, ' ')} Luxembourg, ${service.includes.slice(0, 3).join(', ').toLowerCase()}, IINNOVALUX`;
---

<ServiceLayout
  title={seoTitle}
  description={seoDescription}
  keywords={seoKeywords}
  breadcrumb={[{ label: 'Accueil', href: '/' }, { label: 'Services', href: '/services' }, { label: service.title }]}
>
  <HeroPage
    title={service.title}
    subtitle={service.fullDescription}
    breadcrumb={[
      { label: 'Accueil', href: '/' },
      { label: 'Services', href: '/services' },
      { label: service.title }
    ]}
  />

  <!-- Main Content Section -->
  <section class="py-16 md:py-24">
    <div class="container mx-auto px-4 lg:px-8">
      <div class="grid lg:grid-cols-12 gap-10 lg:gap-16">

        <!-- Left Content -->
        <div class="lg:col-span-7 lg:col-start-1 space-y-12">

          <!-- Detailed Description -->
          <div>
            <p class="text-white/60 text-lg leading-relaxed">
              {service.details}
            </p>
          </div>

          <!-- What's Included -->
          <div>
            <h2 class="text-xl font-display text-white mb-6">
              Ce que nous proposons
            </h2>
            <div class="grid sm:grid-cols-2 gap-3">
              {service.includes.map((item) => (
                <div class="flex items-center gap-3">
                  <svg class="w-4 h-4 text-gold flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                  </svg>
                  <span class="text-white/60 text-sm">{item}</span>
                </div>
              ))}
            </div>
          </div>

          <!-- Benefits -->
          <div class="pt-8 border-t border-white/5">
            <h2 class="text-xl font-display text-white mb-6">
              Pourquoi nous choisir
            </h2>
            <div class="grid sm:grid-cols-2 gap-4">
              {service.benefits.map((benefit) => (
                <div class="flex items-start gap-3">
                  <div class="w-1.5 h-1.5 rounded-full bg-gold mt-2 flex-shrink-0"></div>
                  <span class="text-white/60 text-sm">{benefit}</span>
                </div>
              ))}
            </div>
          </div>

        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-4 lg:col-start-9">
          <div class="sticky top-28">
            <div class="p-6 rounded-2xl bg-white/[0.02] border border-white/5">
              <h3 class="font-display text-lg text-white mb-2">
                Demander un devis
              </h3>
              <p class="text-white/40 text-sm mb-5">
                Gratuit et sans engagement
              </p>

              <Button href="/contact" variant="primary" size="lg" class="w-full mb-5">
                Contactez-nous
              </Button>

              <a
                href="tel:+352621479364"
                class="flex items-center justify-center gap-2 text-white/50 hover:text-gold transition-colors text-sm"
              >
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                </svg>
                <span class="font-mono">+352 621 479 364</span>
              </a>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <CTABanner
    title="Prêt à démarrer ?"
    subtitle="Contactez-nous pour un devis gratuit"
    buttonText="Demander un devis"
    buttonHref="/contact"
  />

  <RelatedServices currentSlug={service.slug} />
</ServiceLayout>
